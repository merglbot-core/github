---
description: Merglbot platform guardrails (security, SSOT, PR hygiene, continuous learning)
source: merglbot-public/docs/templates/cursor/.cursor/rules/merglbot-platform.mdc
globs: ["**/*"]
alwaysApply: true
---

# Merglbot — Cursor Agent Rules (SSOT-safe)

## Scope

You are an AI assistant working on the **merglbot.ai platform** (multi-repo workspace: `merglbot-*`).

### SSOT (single source of truth)
- **Canonical documentation**: `merglbot-public/docs/` (start: `merglbot-public/docs/DOCUMENTATION_INDEX.md`)
- **Rulebook (SSOT)**: `merglbot-public/docs/RULEBOOK_V2.md` (or https://github.com/merglbot-public/docs/blob/main/RULEBOOK_V2.md)
- **Optional appendix (if present)**: `merglbot-core/ai_prompts/agent-appendix/`

## Critical Guardrails (NON‑NEGOTIABLE)

### Security
- NEVER generate or paste real secrets/credentials/API keys.
- NEVER hardcode secrets; use `${{ secrets.* }}` / Secret Manager / env vars.
- NEVER use GCP Service Account JSON keys; always **WIF/OIDC**.
- NEVER log secret values (names only).
- For OAuth, require `prompt: 'select_account'` (SSOT: `merglbot-public/docs/AUTHENTICATION_AUTHORIZATION.md`, `merglbot-public/docs/lessons/MERGLBOT_LESSONS_AUTH.md`).

### Production safety
- All changes go through PRs; never push directly to `main`.
- Double-confirm before destructive actions.
- For infra: Terraform owns infra; CI/CD owns images/runtime env (SSOT: `merglbot-public/docs/adr/0002-terraform-cicd-coexistence.md`).
- FinOps: do not introduce expensive reservations without explicit approval (SSOT: `merglbot-public/docs/IAC_STANDARDS.md`).

### AI bias checks (SSOT-safe)
- **Verify against codebase** (no hallucinated imports/APIs).
- **Minimal change required** (avoid over-engineering).
- **Security blindspot check** (authn/authz, input validation, rate limiting, CORS).
- **Blueprint-first**: ask for spec/AC + edge cases before large changes.
- **SSOT sync**: after code changes, list/update docs that must change.

## Continuous Learning (SSOT-safe)

If you solved something non-obvious (debug workaround, tricky config, project-specific pattern), run:
- Cursor command: `/merglbot-retro`
- Optionally capture personal tactical memory as a **local** Agent Skill in `~/.cursor/skills/` or `~/.claude/skills/` (do not commit; never store secrets or customer data there)

Goal: capture learnings **without creating shadow documentation**:
- Team knowledge → propose/update SSOT docs in `merglbot-public/docs/` (or `merglbot-public/docs/lessons/`).
- Personal tactical memory → create a **local** Agent Skill in `~/.cursor/skills/` or `~/.claude/skills/` that references SSOT.

## Useful SSOT entry points
- `merglbot-public/docs/DOCUMENTATION_INDEX.md`
- `merglbot-public/docs/MERGLBOT_QUICK_REFERENCE.md`
- `merglbot-public/docs/MERGLBOT_AI_TOOLS.md`
- `merglbot-public/docs/MERGLBOT_CURSOR_SETUP.md`
- `merglbot-public/docs/MERGLBOT_PR_ASSISTANT_V3.md`
- `merglbot-public/docs/MERGLBOT_AI_CONTINUOUS_LEARNING.md`
